<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Basic Page Needs
      –––––––––––––––––––––––––––––––––––––––––––––––––– -->
   <meta charset="utf-8">
   <title>Ultimate Flaggle</title>
   <meta name="description" content="Description for website">
   <meta name="author" content="Author Name">
   <!-- CSS
      –––––––––––––––––––––––––––––––––––––––––––––––––– -->
   <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/stylesheet.css') }}">
   <!-- Favicon
      –––––––––––––––––––––––––––––––––––––––––––––––––– -->
   <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Flaggle</title>
</head>
<body>
<div class="header">
   <h2>Ultimate Flaggle</h2>
 </div>
 

 <div class="row">
   <div class="column-left" ></div>
   <div class="column-mid" style="background-color:#9AE05C;">
      <p>{{country}}</p>
      <p>Guess today's country!</p>

      <p>How does it work?</p>
      <p>This version of flaggle works by combining the approachs of <a href="https://flagle.gg/">FLAGLE</a> and <a href="https://www.flaggle.net/">Flaggle</a>.
        You guess a country and are shown hints for how close you are to the country to guess. Hints are the distance, direction and flag colour comparison.
        The flag colour comparison works by comparing the pixel colours in the same position and will highlight green when they match.
        Please note, flags have been "cleaned" to be the same dimensions and a set of 17 colour shades so may not look exactly identical to the original flag.</p>

      <form action="{{ url_for("guesscountry")}}" method="post">
         <label for="guessedcountry">Please select a country from the list below</label>
         <br>
         <br>
         <select id="guessedcountry" name="guessedcountry">
         <!-- Goes through each test name in the database to display in a list -->
         <option disabled selected value> -- select a country! -- </option>
         {% for country in countries %}
         <option value='{{country}}'>{{country}}</option>
         {% endfor %}
     </form>
     
 
   

   </div>
   </div>
   <div class="button">
       <input type="submit" value="Guess!">
   </div>
   </div>

   <div class="row">
   <div class="column-left" ></div>
   <div class="column-mid" style="background-color:#9AE05C;">
      <h2>Guess Results</h2>

      <table class="myTable">
         <tr>
             <th>Guessed Flag</th>
             <th>Guessed Country</th>
             <th>Distance</th>
             <th>Direction</th>
             <th>Flag Difference</th>
         </tr>
         {% for flag, country, distance, direction, image in guesses %}
         <tr>
            <td><img src="{{ flag }}" style="max-width: 100%; height: auto;"></td>
             <td>{{ country }}</td>
             <td>{{ distance }}</td>
             <td><img src="{{ direction }}" style="max-width: 50%; height: auto;"></td>
             <td><img src="{{ image }}" style="max-width: 100%; height: auto;"></td>
         </tr>
         {% endfor %}
     </table>
   </div>
   </div>

 </div>
 
 <div class="footer">
   <p>All rights reserved © Cheylea Hopkinson 2025. Contact on <a href="https://www.linkedin.com/in/cheyleahopkinson/" target="_blank">LinkedIn</a>.</p>
 </div>

 <script>
   // Generated by ChatGPT
   document.addEventListener("DOMContentLoaded", function () {
       let lastPlayed = localStorage.getItem("lastPlayed");
       let streak = localStorage.getItem("streak") || 0;
       
       let today = new Date().toISOString().split("T")[0]; // Get YYYY-MM-DD format
   
       if (lastPlayed === today) {
        console.log("already played")
       } else {
           if (lastPlayed) {
               let yesterday = new Date();
               yesterday.setDate(yesterday.getDate() - 1);
               let yesterdayStr = yesterday.toISOString().split("T")[0];
   
               if (lastPlayed === yesterdayStr) {
                   streak = parseInt(streak) + 1;
               } else {
                   streak = 1; // Reset if missed a day
               }
           } else {
               streak = 1; // First time playing
           }
   
           localStorage.setItem("lastPlayed", today);
           localStorage.setItem("streak", streak);
       }
   
       document.getElementById("streak").innerText = `Streak: ${streak}`;
   });
   </script>

</body>
</html>